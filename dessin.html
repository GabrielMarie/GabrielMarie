<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Galerie de dessins – Gabriel Marie</title>
  <link rel="stylesheet" href="style.css">
  <script src="site.js" defer></script>
</head>
<body>
  <header>
    <div class="banner">
      <img id="siteBanner" src="le site de gab.gif" alt="Bannière">
      <div class="menu-toggle">☰</div>
    </div>
    <nav id="menu">
      <ul>
        <li><a href="home.html"><span class="pixel-gab">Accueil</span></a></li>
        <li><a href="math.html"><span class="pixel-gab">math</span></a></li>
        <li><a href="walker.html"><span class="pixel-gab">CAPITAINE&nbsp;Walker</span></a></li>
        <li><a href="expedition.html"><span class="pixel-gab">ExpEdition</span></a></li>
            <!-- <li><a href="securitephysique.html"><span class="pixel-gab">Securite</span></a></li> -->
        <li><a href="projet.html"><span class="pixel-gab">Projet</span></a></li>
        <li><a href="aurore.html"><span class="pixel-gab">Aurore</span></a></li>
        <li><a href="dessin.html"><span class="pixel-gab">Dessin</span></a></li>
        <li><a href="contact.html"><span class="pixel-gab">Contact</span></a></li>
      </ul>
    </nav>
  </header>

  <main>
    <header><h1>Galerie de dessins</h1></header>
    <div id="galerie-dessins">

      <div class="dessin-entry" data-id="mercedes" data-date="2020-06-20" data-closeups="dessin/mercedes.JPG,dessin/mercedes-closeup1.JPG,dessin/mercedes-closeup2.JPG">
        <img src="dessin/mercedes.JPG" alt="Mercédès">
        <div class="texte">
          <h2>Mercédès</h2>
          <p>Le portrait de Mercédès au graphite est une interprétation monochrome inspirée du Portrait d’Anita de Frederic Leighton. Il représente le personnage de Mercédès, tiré de mon livre Le journal de bord du capitaine Walker.</p>
          <p>Mercédès vit à Capristia, un petit village côtier de la planète Catalogne. Ce village est lui-même inspiré de Harrington Harbour (300 habitants).</p>
          <p>Mercédès est une très jolie fille, extrêmement introvertie, considérée comme la belle du village. Elle passe beaucoup de temps à méditer seule dans sa tête. À vrai dire, elle n’a pas beaucoup d’amies, car à Capristia, pour une jeune adolescente, il n’y a pas grand monde avec qui se lier. Alors, pour tuer le temps, elle se promène sur la plage… et dans sa tête.</p>
          <p>Lors de ses longues promenades sur les plages de sable noir de Capristia, lorsque le vent salin, chargé de ses petits cristaux de sel, fait briller son visage d’ange sous le soleil de Capristia, lorsque le vent coquin plaque le lin de sa robe blanche contre les courbes de son corps… sait-elle seulement que tous les hommes de tous les équipages du port de Capristia la dévorent du regard ?</p>
          <p>Probablement pas, puisque Mercédès souffre de cécité — et c’est là sa damnation : être la plus belle, mais être incapable de voir sa propre beauté.</p>
          <p>Elle fut le deuxième amour de Walker — le premier étant la patrie, et la guerre. C’est d’ailleurs pour cet amour-là que Walker la quitte, avec la promesse, toute fausse, de revenir. Mais le temps passa, et les nouvelles de Walker s’espacèrent… jusqu’à ce qu’il n’y en ait plus. Le croyant mort, elle voulut le rejoindre, et sauta du haut des falaises de Capristia.</p>
          <p>Mais en vérité, Walker — maintenant capitaine Walker — avait triomphé de la guerre… et perdu sa patrie. Le jour de son retour à Capristia, il avait aussi perdu Mercédès.</p>
          <p>N’ayant plus rien à aimer, il a lentement entamé sa descente aux enfers.</p>
          <p>Descendre aux enfers : voilà ce qui arrive à ceux qui n’ont plus rien à quoi s’accrocher sur cette terre, mais qui n’ont pas le courage d’aller six pieds sous terre.</p>
        </div>
      </div>

      <div class="dessin-entry" data-id="casse" data-date="2023-07-15" data-closeups="dessin/casse.JPG,dessin/casse-closeup1.JPG,dessin/casse-closeup2.JPG,dessin/casse-closeup3.JPG,dessin/casse-closeup4.JPG,dessin/casse-closeup5.JPG,dessin/casse-closeup6.JPG,dessin/casse-closeup7.JPG,dessin/casse-closeup8.JPG,dessin/casse-closeup9.JPG,dessin/casse-closeup10.JPG,dessin/casse-closeup11.JPG,dessin/casse-closeup12.JPG,dessin/casse-closeup13.JPG">
        <img src="dessin/casse.JPG" alt="La cruche cassée">
        <div class="texte">
          <h2>La Cruche Cassée</h2>
          <p>La Cruche cassée est une reproduction au crayon de couleur de l’œuvre homonyme du peintre Jean-Baptiste Greuze (1725–1805). Le tableau représente une jeune fille tenant une cruche fendue, symbole discret de l’innocence perdue. Cette reproduction comporte énormément de différences avec l’original. On note entre autres la robe rose, le cadre rectangulaire, et les nuages aux couleurs de la France.</p>
        </div>
      </div>
    </div>
  </main>

  <div id="lightbox">
    <span id="close-lightbox">✖</span>
    <img id="lightbox-img" src="" alt="">
    <div id="lightbox-controls">
      <button id="prev-image">←</button>
      <div id="lightbox-indicator">Image 1 / 1</div>
      <button id="next-image">→</button>
    </div>
  </div>

  <img id="easter-egg" src="oeufstat.png" alt="Œuf de Pâques">



  <script>
document.addEventListener("DOMContentLoaded", () => {
  /* ---------- Tri + alternance gauche/droite ---------- */
  const galerie = document.querySelector("#galerie-dessins");
  const entries = Array.from(document.querySelectorAll(".dessin-entry"));
  entries.sort((a, b) => new Date(b.dataset.date) - new Date(a.dataset.date));
  entries.forEach((entry, i) => {
    entry.classList.add(i % 2 === 0 ? "left" : "right");
    galerie.appendChild(entry);
  });

  /* ---------- Sommaire cliquable ---------- */
  const legende = document.createElement("div");
  legende.className = "dessin-legende dessin-sommaire";
  let contenu = "<strong style='display:block; margin-bottom:0.5em;'>🖼️ Sommaire des dessins</strong><ul>";
  entries.forEach((entry, i) => {
    const titre = entry.querySelector("h2")?.textContent?.trim() || `Dessin ${i + 1}`;
    const date = entry.dataset.date || "Sans date";
    const ancre = `dessin-${i}`;
    entry.id = ancre;
    contenu += `<li><a href="#${ancre}"><span class='date'>${date}</span> — <span class='titre'>${titre}</span></a></li>`;
  });
  contenu += "</ul>";
  legende.innerHTML = contenu;
  galerie.insertAdjacentElement("beforebegin", legende);

  /* ---------- Apparition au scroll ---------- */
  const observer = new IntersectionObserver((obsEntries) => {
    obsEntries.forEach(e => {
      if (e.isIntersecting) {
        e.target.classList.add("visible");
        observer.unobserve(e.target);
      }
    });
  }, { threshold: 0.1 });
  document.querySelectorAll(".dessin-entry, .texte-full").forEach(e => observer.observe(e));

  /* ---------- Lightbox ---------- */
  const lightbox = document.getElementById("lightbox");
  const lightboxImg = document.getElementById("lightbox-img");
  const closeBtn = document.getElementById("close-lightbox");
  const prevBtn = document.getElementById("prev-image");
  const nextBtn = document.getElementById("next-image");
  const indicator = document.getElementById("lightbox-indicator");

  let currentIndex = 0;
  let currentImages = [];

  const normalizePath = (p) => p?.trim();

  const updateIndicator = () => {
    if (indicator) indicator.textContent = `${currentIndex + 1} / ${currentImages.length}`;
  };

  const showImage = () => {
    if (!currentImages.length) return;
    lightboxImg.src = normalizePath(currentImages[currentIndex]);
    updateIndicator();
  };

  const openLightbox = () => {
    showImage();
    lightbox.classList.remove("fade-out");
    lightbox.style.display = "flex";
    // forcer le reflow avant anim d’entrée
    void lightbox.offsetWidth;
    lightbox.classList.add("fade-in");
  };

  const closeLightbox = () => {
    lightbox.classList.remove("fade-in");
    lightbox.classList.add("fade-out");
    setTimeout(() => { lightbox.style.display = "none"; }, 200); // adapter si ton CSS diffère
  };

  // Ouvrir depuis n’importe quelle vignette
  document.querySelectorAll(".dessin-entry img").forEach(img => {
    img.addEventListener("click", () => {
      const parent = img.closest(".dessin-entry");
      const closeupsAttr = parent?.dataset.closeups || "";
      const list = closeupsAttr
        ? closeupsAttr.split(",").map(normalizePath).filter(Boolean)
        : [img.getAttribute("src")].filter(Boolean);
      currentImages = list;
      currentIndex = 0;
      openLightbox();
    });
  });

  // Navigation (boutons)
  prevBtn?.addEventListener("click", (e) => {
    e.stopPropagation();
    if (currentImages.length > 1) {
      currentIndex = (currentIndex - 1 + currentImages.length) % currentImages.length;
      showImage();
    }
  });

  nextBtn?.addEventListener("click", (e) => {
    e.stopPropagation();
    if (currentImages.length > 1) {
      currentIndex = (currentIndex + 1) % currentImages.length;
      showImage();
    }
  });

  // Clic gauche/droite dans l’image
  lightboxImg.addEventListener("click", (e) => {
    if (!currentImages.length) return;
    const bounds = lightboxImg.getBoundingClientRect();
    const leftHalf = e.clientX < bounds.left + bounds.width / 2;
    if (currentImages.length > 1) {
      currentIndex = leftHalf
        ? (currentIndex - 1 + currentImages.length) % currentImages.length
        : (currentIndex + 1) % currentImages.length;
      showImage();
    }
  });

  // Fermer en cliquant hors de l’image
  lightbox.addEventListener("click", (e) => {
    if (e.target === lightbox) closeLightbox();
  });

  // Bouton fermer
  closeBtn?.addEventListener("click", (e) => { e.stopPropagation(); closeLightbox(); });

  // Clavier
  document.addEventListener("keydown", (e) => {
    if (lightbox.style.display === "flex") {
      if (e.key === "Escape") closeLightbox();
      if (e.key === "ArrowLeft") prevBtn?.click();
      if (e.key === "ArrowRight") nextBtn?.click();
    }
  });
});
</script>




  <img id="flyerGif" src="avion.gif" alt="avion pixel-art" hidden>
</body>
</html>